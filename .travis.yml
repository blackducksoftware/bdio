sudo: required

language: java

jdk:
  - oraclejdk8

services:
  - docker

before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/

env:
  global:
    - secure: "pG6PUcPrIl/IRHzrIvxrojIWzCJfIRVwTCFKQoQSK+CqhNMAuK6TYsuhujxDl558DZOyXowCLsvI8CGeph9gxlmKWOJUPoWjAE/28wITNXh634eDnHS5x1ahjAvxsbyT30tKxyaFVYYgEzgn0bCyKZxszNnHHaXr9Gp+oCmkk8DmVFkFHv+oyFClTDFZwoNNpc+gUUhEQVnBkkoP6E5ASMjatv5po/6AKIaxNBbrq3XopwnT6T3qBkGNPgoxjzquHPAXrgSCNhjmtC3jcy+yGbWNrMB17xo8QaGUTyBT4hEZ3Lj4km9No9RZSNp7MO9EPaZepHac/lNe/NGHHgYTgmqTb38kOCP2Bm1YrdnE/S9igKZ8HzsYoqNGKUGdtg7kvFgNuUv5RQaJtEVDlV282ZbEnsyk8u4opzlWcNzYNwzccVt9cIfPvw1pT8JYuOqy4qO4/sDxocbCTYuDb882v60dOcajOeu42Ro01EieuEcsy4fQiifN6Pc+GaYYHpPLXexp6PFNBBH6V4MeIBrimm7m0Khkdr0gTueRy/b+WqNY9ByoxH9jt2Quw2hq5MPdG3q6i8X4EZxQhJyZdEa0O3uEjXmAoTe2zdGMcZ7OWo1UsjcwJNb1HD/IzBzfiFu4oTgoPE3tjYn46b55OvOZz3w1v6UvzOggy66TLHJ08F8="
    - secure: "nUYbXIJU/4CvC5FZPK+qofLNVbzyBwEPjfTmeaKcp7EwnvK9lCWAIz5Fl2Hjgguz33AXnWwBydN9uEkqih0l8VcP3EVxseh7sCofzQ9B4t3NOMPWqaRNXallkx6BYlOEWl9DPJ1IQtEDHRweTAy750wxi7VesOTyXgjzSzIA6yoqjE+iJvZi0mYS7Z2VpbxcrHqFPdWv4zTNMisX+BNEOzClvpFtwa4fi5TxeOebQc9e5k4qW9oJ3Yqbw0/cwyliJwSKo5+IKa3Fsv+iuI8D7cCXJuLJdZza0bMhP0dPzTpfjc+/BdRF/VxJ5fM1jsztuZCSsHSEjNIjAtU97nCwKm4zaM8mgnfJB/N4LMaRBQJ6a3mTAYu61PpH/rVVcvC8opbM5VOzv8LISxG/1VdOHoFQF2wpBqRzs2Lb16QRW7bQ9wmu60enZHaqWV4+T4QQ8n0VyC9MvbPJf6QVAZQa2rE9hJJ9GJn93M/hv5LYfyrQDnfGAZ1j4AuSQJ+j/P64XPXVhtN16lNXiSNoRv0cUQFD3HXc1HqFGk10yzT+P22jHKxa5fnlVzwFjJ67zRXdde9fRA8IIOjTfvhauGirwPAUkOMlc9I0TtJW736ELTQexpAcIKBXWM36lZPMF05nxz4mv878/9A9pF4aDCNqohfLX6PuQbWa094vv2R2KFs="

before_install:
  - sudo /etc/init.d/postgresql stop
  - docker build -t blackducksoftware/bdio-tinkerpop-db bdio-tinkerpop-db/
  - docker run -d -p 5432:5432 blackducksoftware/bdio-tinkerpop-db
install: ./gradlew -I gradle/travis.gradle assemble
script: ./gradlew -I gradle/travis.gradle check
after_success: ./gradlew -I gradle/travis.gradle publish

deploy:
  provider: releases
  api_key:
    secure: "DjQ08MXGcBLv8TTfkYYKIM0iv2Uen3x2Quwuwekrlw008fK9xfcLDARqGp2nig4NvbObDo/tmBxulZog2DH8kl4/v8kw3lmGQuww/hS3Nsigdn2FVUXzx9erUEf2vTOJOwgvJI9+xftsCRMlKtDrJ3mVhY++VYkr8PiOL3mJVsK3ptvVCxHxgnGTvVVf8BMWcFx/5kAiooEXhMU2XnCN7tvpmXy0KuHngH7lU29gRi5AZ3dLgkJAAnuNiEs+HFMTLXZj/dmv50KFyMB1WFg28cpmEULdmJ4vpqvTi/L8RrewuHsW+I1QPWnuhs1YW2DYphxmVWmJSbbykTFKrHOwRiEBsFZmhuT0q0K9Luy9//UL5Pk5jI1p1Msl4gptUI5AuyMLXbC45MzjYmLmH4Z8rDwJ3qfdOfHs+LK4uqNJh9SJxCbYCtuh1ZerrTELSehjQ19ygBpJK07KDNyaDKYWRi6qg2WPrxvBg+kZv5LkazTkcVnjNnwgdsVNI8IyzF3BPYYLmVnvsFwkv/auoeoHA6LxTUFlznulWqdz26MQ+RUO/XGMi2Z/Mbd7vN0du97OD8yxDYvcBisOdiVxcCf28IiJWblVi/SXpCiq/0Dvl47FU3F5YSe7JxhAhoC725fkpGlEoZAtB08ECyyhHsRzBvPKleKLKwAWgrPafU6uBjU="
  file:
    - "bdio-tool/build/distributions/bdio-$TRAVIS_TAG.zip"
    - "bdio-tool/build/distributions/bdio-$TRAVIS_TAG.tar"
  skip_cleanup: true
  on:
    tags: true
